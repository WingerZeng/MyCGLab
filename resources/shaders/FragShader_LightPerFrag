#version 430 core
/* outputs */
layout (location = 0) out vec4 FragColor;
layout (location = 1) out vec4 albedo;
layout (location = 2) out vec3 worldPos;
layout (location = 3) out vec3 normal;
layout (location = 4) out vec3 primId;

/* inputs */
in vec3 aNormal;
in vec3 aWorldPos;
in vec2 aUv;

/* uniforms */
struct Material
{
	int mtype ;
	// One color
	vec4 ourColor;
	// BlinnPhong
	sampler2D kd;
	sampler2D ks;
	sampler2D ns;
};
uniform Material material;
uniform vec4 Le;
uniform bool selected = false;
uniform vec3 selectedColor;
uniform vec3 primid;

void main(){
	if(selected){
		FragColor = vec4(selectedColor,1);
	}
	else{
		FragColor += Le;
	}
	worldPos = aWorldPos;
	normal = normalize(aNormal);
	primId = primid;
	switch(material.mtype){
	case -1:
		albedo = material.ourColor;
		break;
	case 0:
		albedo = texture(material.kd, aUv);
		break;
	case 1:
		albedo = texture(material.kd, aUv);
		break;
	}
	return;
}